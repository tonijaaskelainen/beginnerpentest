<img src="https://github.com/tonijaaskelainen/beginnerpentest/blob/master/materiaalit/kuvat/haaga-helia.png" alt="Haaga-Helia logo" />

# Penetration Testing -harjoitusympäristön toteutus vapailla ohjelmilla
## Kali Linuxiin sisältyvällä Metasploitilla tunkeutuminen Metasploitable 2 -koneeseen Vagrant-virtuaaliympäristössä

Toni Jääskeläinen

Opinnäytetyö  
Tietojenkäsittelyn koulutusohjelma  
25.10.2017

# Tiivistelmä

<table>
  <tbody>
    <tr>
      <td colspan="2">
        <strong>Tekijä(t)</strong>
        <br />
        Toni Jääskeläinen
      </td>
    </tr>
    <tr>
      <td colspan="2">
        <strong>Koulutusohjelma</strong>
        <br />
        Tietojenkäsittely
      </td>
    </tr>
    <tr>
      <td>
        <strong>Opinnäytetyön otsikko</strong>
        <br />
        Penetration Testing -harjoitusympäristön toteutus vapailla ohjelmilla - Kali Linuxiin sisältyvällä Metasploitilla tunkeutuminen Metasploitable 2 -koneeseen Vagrant-virtuaaliympäristössä
      </td>
      <td>
        <strong>Sivu- ja liitesivumäärä</strong>
        <br />
        &nbsp;
      </td>
    </tr>
    <tr>
      <td colspan="2">
        <br />
        <br /><br />
        <br /><br />
        <br /><br />
      </td>
    </tr>
    <tr>
      <td colspan="2">
        <strong>Asiasanat</strong>
        <br />
        tunkeutumistestaus, vapaat ohjelmat, virtualisointi, Metasploit Framework, Metasploitable 2
      </td>
    </tr>
  </tbody>
</table>

# Sisällys

1. [Johdanto](#johdanto)  
  1.1 [Projektin tausta](#projektin-tausta)  
  1.2 [Projektin tavoite, tehtävä ja tulokset](#projektin-tavoite-tehtävä-ja-tulokset)  
  1.3 [Tutkimuskysymykset](#tutkimuskysymykset)  
  1.4 [Kohderyhmä ja rajaus](#kohderyhmä-ja-rajaus)  
  1.5 [Menetelmät ja työn rakenne](#menetelmät-ja-työn-rakenne)  
  1.6 [Käsitteet](#käsitteet)  
2. [Penetration Testing eli tunkeutumistestaus](#penetration-testing-eli-tunkeutumistestaus)  
  2.1 [Tunkeutumistestauksen merkitys ja hyödyt](#tunkeutumistestauksen-merkitys-ja-hyödyt)  
  2.2 [Tunkeutumistestauksen standardi](#tunkeutumistestauksen-standardi)  
&nbsp;&nbsp;&nbsp;&nbsp;2.2.1 [Pre-engagement Interactions](#pre-engagement-interactions)  
&nbsp;&nbsp;&nbsp;&nbsp;2.2.2 [Intelligence Gathering](#intelligence-gathering)  
&nbsp;&nbsp;&nbsp;&nbsp;2.2.3 [Threat Modeling](#threat-modeling)  
&nbsp;&nbsp;&nbsp;&nbsp;2.2.4 [Vulnerability Analysis](#vulnerability-analysis)  
&nbsp;&nbsp;&nbsp;&nbsp;2.2.5 [Exploitation](#exploitation)  
&nbsp;&nbsp;&nbsp;&nbsp;2.2.6 [Post Exploitation](#post-exploitation)  
&nbsp;&nbsp;&nbsp;&nbsp;2.2.7 [Reporting](#reporting)  
3. [Välineet ympäristön toteutukseen](#välineet-ympäristön-toteutukseen)  
  3.1 [Vapaat ohjelmat](#vapaat-ohjelmat)  
  3.2 [Virtualisointi](#virtualisointi)  
&nbsp;&nbsp;&nbsp;&nbsp;3.2.1 [VirtualBox](#virtualbox)  
&nbsp;&nbsp;&nbsp;&nbsp;3.2.2 [Vagrant](#vagrant)  
4. [Välineet ympäristöön tunkeutumiseen](#välineet-ympäristöön-tunkeutumiseen)  
  4.1 [Kali Linux](#kali-linux)  
&nbsp;&nbsp;&nbsp;&nbsp;4.1.1 [Metasploit Framework](#metasploit-framework)  
&nbsp;&nbsp;&nbsp;&nbsp;4.1.2 [Burp Suite](#burp-suite)  
5. [Tunkeutumiskohteet](#tunkeutumiskohteet)  
  5.1 [Metasploitable](#metasploitable)  
  5.2 [Muut peruspalvelimet](#muut-peruspalvelimet)  
&nbsp;&nbsp;&nbsp;&nbsp;5.2.1 [Windows-palvelin](#windows-palvelin)  
&nbsp;&nbsp;&nbsp;&nbsp;5.2.2 [Linux-palvelin](#linux-palvelin)  
6. [Penetration Testing -harjoitusympäristön toteutus](#penetration-testing--harjoitusympäristön-toteutus)  
  6.1 [Virtuaaliympäristön pystytys](#virtuaaliympäristön-pystytys)  
  6.2 [Tunkeutumisen testaaminen](#tunkeutumisen-testaaminen)  
7. [Pohdinta](#pohdinta)  

&nbsp;&nbsp;&nbsp;&nbsp;[Lähteet](#lähteet)  
&nbsp;&nbsp;&nbsp;&nbsp;[Liitteet](#liitteet)  

# Johdanto

Täydennetään myöhemmin lisää...

## Projektin tausta

Projekti käynnistetään opiskelijan opinnäytetyönä, koska opiskelijan mielestä aihealue on kiinnostava ja olisi hyvä saada aikaan ympäristö, jossa tunkeutumistestausta voi harjoitella turvallisesti. Projektista saatava hyöty on käytännön ympäristö, jossa voi turvallisesti harjoitella tunkeutumistestausta.

## Projektin tavoite, tehtävä ja tulokset

Työn tehtävänä on selvittää, kuinka Penetration Testing -harjoitusympäristö toteutetaan vapailla ohjelmilla. Tavoitteena on saada aikaan ympäristö, jossa voi turvallisesti harjoitella tunkeutumistestausta. Ympäristön pitää myös olla helposti saatavilla ja hyödynnettävissä. Projektin tuloksena syntyy tunkeutumistestaukseen sopiva virtualisoitu harjoitusympäristö, jonka voi ladata GitHubista. Projektissa opitaan käyttämään GitHubia, pystyttämään tarvittava ympäristö ja tunkeutumaan johonkin kohteeseen jollakin vapaalla työkalulla, kun ympäristöä testataan. Tätä varten projektissa verrataan ympäristön toteutukseen ja tunkeutumiseen sopivia työkaluja ja kohteita keskenään.

## Tutkimuskysymykset

Seuraaviin kysymyksiin vastaaminen auttaa projektin tavoitteiden ja tehtävän saavuttamisessa. Kysymykset on jaoteltu pääkysymykseen ja alakysymyksiin.

Tutkimuksen pääkysymys:

- Kuinka vapailla ohjelmilla toteutetaan Penetration Testing -harjoitusympäristö?

Tutkimuksen alakysymykset:

- Millä välineillä Penetration Testing -harjoitusympäristö kannattaa toteuttaa?

- Millä välineillä tunkeutuminen Penetration Testing -harjoitusympäristöön kannattaa toteuttaa?

- Minkälaiseen kohteeseen kannattaa tunkeutua Penetration Testing -harjoitusympäristössä?

## Kohderyhmä ja rajaus

Työn kohderyhmänä ovat Penetration Testing -aloittelijat, jotka hallitsevat Linuxin ja komentorivin käytön. Työ rajataan käsittämään vapaat ohjelmat. Työhön valitaan yksi virtuaaliympäristön mahdollistava kokonaisuus, yksi tunkeutumistyökalu ja yksi kohde, johon tunkeudutaan.

## Menetelmät ja työn rakenne

Työ on toiminallinen opinnäytetyö ja siihen liittyvät tiedostot tuotetaan GitHubiin osoitteeseen https://github.com/tonijaaskelainen/beginnerpentest. Varsinainen opinnäytetyön raportti on saatavilla osoitteesta https://github.com/tonijaaskelainen/beginnerpentest/blob/master/materiaalit/ONT.md. Työssä pystytetään kannettavaan tietokoneeseen virtuaalinen ympäristö ja testataan sen toiminta. Ensin työssä käydään läpi, mitä Penetration Testing on. Tämän jälkeen verrataan ympäristön toteutukseen soveltuvia työkaluja keskenään. Tämän yhteydessä kerrotaan vapaista ohjelmista ja virtualisoinnista. Seuraavaksi verrataan, minkälaisilla työkaluilla tunkeutuminen kannattaa toteuttaa. Sitten verrataan, minkälaiseen kohteeseen kannattaa tunkeutua Penetration Testing -harjoitusympäristössä. Kun nämä asiat ovat selvillä, niin ympäristö toteutetaan valitulla välineellä ja testataan valittuun kohteeseen tunkeutumista sitä varten valitulla työkalulla. Lopuksi pohditaan, miten työn tulokset vastaavat työn tavoitteeseen.

## Käsitteet

|Käsite			| Määritelmä													|
|-----------------------|---------------------------------------------------------------------------------------------------------------|
|DoS | Denial of Service. Palvelunestohyökkäys.	Palveluun kohdistuva hyökkäys, joka estää palvelun käyttämisen.                         |
|IDS | Intrusion Detection System. Tunkeutumisen havaitsemisjärjestelmä. Järjestelmä, joka yrittää havaita mahdollisen tunkeutujan.	|
|IPS | Intrusion Prevention System. Tunkeutumisenestojärjestelmä. Järjestelmä, joka yrittää estää mahdollisen tunkeutumisen.		|
|Palomuuri | Laite tai ohjelmisto, joka suojaa verkkoa suodattamalla tietoliikennettä tiettyjen sääntöjen mukaan.                       |
|Penetration Testing | Tunkeutumistestaus. Sallittu murtautuminen tietojärjestelmiin tietoturvan tilan kartoittamiseksi.		|
|Pääsynhallinta | Tapa hallita pääsyä järjestelmään esimerkiksi käyttäjätunnuksilla ja salasanoilla.					|

# Penetration Testing eli tunkeutumistestaus

Tunkeutumistestauksella (eng. Penetration Testing) tarkoitetaan sallittua murtautumista tietojärjestelmiin ja IT-infrastruktuuriin, jotta saataisiin arvioitua tiettyjen puolustusmekanismien tehokkuus ja kartoitettua, onko ohjelmissa haavoittuvuuksia tai konfigurointivirheitä. Testauksen avulla on myös mahdollista selvittää, noudattavatko käyttäjät tietoturvapolitiikkaa vai käyttäytyvätkö he riskialttiisti yrityksen kannalta. Tunkeutumistestaus suoritetaan yleensä manuaalisesti tai automaattisesti potentiaalisesti alttiisiin kohteisiin, kuten palvelimiin, päätelaitteisiin, langattomiin verkkoihin sekä tietoliikenne- ja mobiililaitteisiin. Jos tunkeutuminen onnistuu jonkin haavoittuvuuden kautta, niin testaajat saattavat yrittää peräkkäisiä hyökkäyksiä ja käyttöoikeuksien korottamista päästäkseen syvemmälle järjestelmiin ja saadakseen tarkemman kuvan järjestelmien tilasta. Kaikki löydetyt haavoittuvuudet, joihin hyökkäys onnistui, esitellään yleensä IT- ja verkkojärjestelmien hallinnoijille strategisten päätösten tekoa ja parannuskeinojen priorisointia varten. Tunkeutumistestauksen perustarkoitus on mitata, kuinka käyttökelpoisia väärin konfiguroidut tai käyttäjien vaarantamat järjestelmät ovat hyökkääjille. Lisäksi testauksessa arvioidaan vastaavien tilanteiden aiheuttamat seuraukset resursseille tai toiminnoille. (Core Security 2015.)

## Tunkeutumistestauksen merkitys ja hyödyt

Tunkeutumistestaus on tärkeää, koska tietomurrot ja palvelukatkokset ovat kalliita. Ne voivat taloudellisten kulujen lisäksi heikentää yrityksen mainetta ja vähentää asiakaskuntaa. Lisäksi on mahdotonta turvata kaikki mahdollinen tieto koko ajan. Perinteiset usean kerroksen puolustusmekanismit, kuten pääsynhallinta, salakirjoitus, IPS, IDS ja palomuurit sekä uusien teknologioiden käyttöönotto ovat lisänneet monimutkaisuutta ja täten tehneet jopa entistä vaikeammaksi tunnistaa kaikki yrityksen mahdolliset haavoittuvuudet. Tunkeutumistestaus auttaa identifioimaan ja priorisoimaan erilaisia turvallisuusriskejä arvioimalla yrityksen kykyä suojata hyödykkeitä sisäiseltä ja ulkoiselta väärinkäytöltä. Jotta voitaisiin varmistaa yhdenmukainen IT- ja verkkoturvallisuuden hallinta, pitäisi tunkeutumistestaus suorittaa säännöllisin väliajoin perusteellisesti. Näin voidaan tehokkaammin estää luvaton pääsy kriittisiin järjestelmiin ja niissä oleviin tietoihin. (Core Security 2015.)

Core Securityn (2015) mukaan tunkeutumistestaus pitäisi lisäksi suorittaa aina, kun

- verkkoinfrastruktuuria tai sovelluksia lisätään
- infrastruktuuriin tai sovelluksiin kohdistuu merkittäviä parannuksia/päivityksiä tai muutoksia
- uusia toimistotiloja otetaan käyttöön
- turvallisuuspaikkauksia otetaan käyttöön
- loppukäyttäjäpolitiikkaa muutetaan.

Tunkeutumistestauksen moniin hyötyihin kuuluu älykäs haavoittuvuuksien hallinta, verkon alhaallaolokulujen välttäminen, säännösteltyjen vaatimusten täyttäminen ja sakkojen välttäminen sekä yrityskuvan ja asiakaskunnan säilyttäminen. Älykäs haavoittuvuuksien hallinta tarkoittaa, että tunkeutumistestauksen avulla saadaan tarkkaa tietoa varsinaisista, hyökättävissä olevista haavoittuvuuksista ja näin pystytään identifioimaan kriittisimpien haavoittuvuuksien joukosta vähemmän merkittävät ja väärät hälytykset. Tämä mahdollistaa parannuskeinojen priorisoinnin ja turvallisuusresurssien tehokkaamman allokoinnin oikeaan aikaan oikeisiin paikkoihin. Verkon alhaallaolokulujen välttäminen tarkoittaa, että tunkeutumistestauksella pystytään ennakoivasti tunnistamaan ja osoittamaan riskejä ennen kuin hyökkäyksiä tai murtoja tapahtuu, ja näin vältetään taloudelliset riskit. Säännösteltyjen vaatimusten täyttäminen ja sakkojen välttäminen tarkoittaa, että tunkeutumistestaus auttaa yrityksiä osoittamaan, että ne noudattavat tiettyjä määräyksiä. Tunkeutumistestauksessa syntyvät tarkat raportit auttavat yrityksiä välttämään määräysten noudattamattomuudesta aiheutuvia sakkoja. Yrityskuvan ja asiakaskunnan säilyttäminen tarkoittaa, että tunkeutumistestaus auttaa yritystä säilyttämään sen maineen ja luotettavuuden, koska yksikin tietomurto voi karkottaa yrityksen nykyisiä asiakkaita ja estää uusien asiakassuhteiden syntymistä. (Core Security 2015.)

## Tunkeutumistestauksen standardi

Tunkeutumistestausta varten on olemassa lähes muodollinen standardi, jonka tarkoitus on tarjota yrityksille ja tunkeutumistestauksen tarjoajille yhteinen kieli. Nämä ovat täten kyseisen standardin kohderyhmänä. Standardin on tarkoitus sisältää minimilähtökohdat tunkeutumistestauksen suorittamista varten. Tämä tarkoittaa, että yritysten on tarkoitus pystyä vaatimaan tunkeutumistestaustyöltä tietyt lähtökohdat standardin avulla. Vastaavasti standardin on tarkoitus tarjota tunkeutumistestauksen tekijöille lähtökohdat huomioon otettavista asioista kartoituksesta raportointiin asti. Lisäksi standardin on myös tarkoitus sisältää korkeampia tasoja vaativampia turvallisuustarpeita varten. Nämä tasot on tarkoitus määritellä alakohtaisesti. Standardi tulee määrittelemään teknisen raportoinnin lisäksi myös mallin yritysjohdolle raportointia varten. (Penetration Testing Execution Standard 2015a.)

Tunkeutumistestauksen standardi määrittelee, mitä osa-alueita tunkeutumistestaukseen kuuluu. The Penetration Testing Execution Standardin (2014a) mukaan nämä ovat:

- Pre-engagement Interactions (työtä edeltävät toimenpiteet).
- Intelligence Gathering (tiedon kerääminen).
- Threat Modeling (uhkien mallintaminen).
- Vulnerability Analysis (haavoittuvuuksien analysointi).
- Exploitation (haavoittuvuuksiin hyökkääminen).
- Post Exploitation (hyökkäysten jälkeiset toimenpiteet).
- Reporting (raportointi).

Seuraavaksi käydään näitä osa-alueita läpi yksi kerrallaan. Osa-alueista pyritään antamaan kokonaiskuva.

### Pre-engagement Interactions

Tämä osa-alue sisältää kysymyksiä, joihin kartoituksen kohteena olevan yrityksen on syytä vastata. Näin saadaan määriteltyä tunkeutumistyön laajuus ja syitä, miksi ja mitä testejä yritys haluaa tunkeutumisyhtiön suorittavan. Työn laajuuden määrittelyssä on tarkoin otettava huomioon työn määrä, siihen käytettävä aika ja hinnoittelu. Asiakasyritys ei aina välttämättä tiedä, mitä asioita tarvitsee testata. Testaajan on siis pystyttävä antamaan opastusta, kun määritellään testattavia asioita. Lisäksi testaajan täytyy ymmärtää, että on eri asia testata yhtä kohdetta suurella intensiteetillä useiden aukkojen löytämistä varten ja montaa kohdetta vain, jotta löytyisi yksi tapa päästä järjestelmään sisään. Tunkeutumistestauksen tavoitteena on identifioida yritykselle haitallisia riskejä. Voi olla, että yrityksen tietoturvan taso ei ole riittävällä tasolla, ja tässä tapauksessa yritys hyötyy enemmän haavoittuvuuksien analysoinnista kuin varsinaisesta tunkeutumistestauksesta. Jos testaajalla on kokemusta testin suorittamisesta, niin yleensä testiin käytettävän ajan pystyy arvioimaan. Kaiken varalta tähän aikaan kannattaa lisätä 20 % yllätysten varalle. Jos työ valmistuu ennen 20 %:n lisäaikaa, niin testaajat voivat esimerkiksi syventyä vielä jonkin vaikean haavoittuvuuden selvittämiseen tai näyttää yrityksen tietoturva-asiantuntijoille, kuinka järjestelmiin päästiin sisään. Sen sijaan, jos osoittautuu, että työtehtävät ylittävät sopimuksessa mainitun työn laajuuden, niin ne pitäisi kirjata Statement Of Work -dokumenttiin, joka molempien osapuolien on syytä allekirjoittaa ennen kuin lisätöitä voidaan aloittaa. Jotta rajat olisivat selkeät, niin työlle täytyy asettaa tarkat aloitus- ja lopetusajankohdat. (Penetration Testing Execution Standard 2014b.)

Kysymykset on jaoteltu useampaan eri kategorioihin, joita ovat verkon tunkeutumistestaus, websovellusten tunkeutumistestaus, langattoman verkon tunkeutumistestaus, fyysinen tunkeutumistestaus ja sosiaalinen manipulointi. Lisäksi liiketoimintayksiköiden johtajille ja järjestelmänvalvojille on määritelty kysymyksiä. Esimerkiksi ennen verkkoon tunkeutumista on määriteltävä IP-osoitealueet ja toimialueet. On syytä varmistaa, että osoitteet todella kuuluvat kyseiselle yritykselle, jotta tunkeutuminen ei vahingossa tapahdu jonkin muun yrityksen verkkoon. Kolmansille osapuolille, kuten internet- ja pilvipalvelujen tarjoajille, on myös syytä ilmoittaa testauksesta, koska testaajien täytyy mahdollisesti noudattaa erityisiä sääntöjä kyseisiin kohteisiin hyökättäessä. Näin on myös eri maiden kohdalla, joten on hyvä ottaa selvää, missä maissa testattavat palvelimet ovat. Kaikki aiheet eivät välttämättä ole sopivia sosiaalista manipulointia varten, joten kysymyksillä saadaan selville sopivat aihealueet. Palvelunestohyökkäykset (DoS) voivat saada aikaan paljon vahinkoa, joten ne kannattaa suorittaa tuotantoympäristön kanssa identtisessä testiympäristössä. Hätätilanteiden varalle on myös kerättävä tarvittavat yhteystiedot. Yksi osa tunkeutumistestausta on testata yrityksen kykyä reagoida tietoturvaloukkauksiin ja jos järjestelmiin päästään sisälle ilman, että kukaan tietoturvahenkilö huomaa sitä, niin on löydetty valtava tietoturva-aukko. Tilanneraportteja pitäisi tehdä säännöllisin väliajoin. Kaikki arkaluontoinen viestintä pitäisi salakirjoittaa. Kaikkein arkaluontoisimpia tietoja välttämättä voi edes välittää kirjallisessa muodossa, eikä esimerkiksi henkilökohtaisia tietoja saa kerätä. (Penetration Testing Execution Standard 2014b.)

### Intelligence Gathering

Tässä osion avulla kerättyjen tietojen pohjalta voidaan muodostaa hyökkäyssuunnitelma. Tiedon keräämisessä on kolme tasoa. Ensimmäisessä tasossa kerättävät tiedot mahdollista saada melkein kokonaan automatisoitujen työkalujen avulla. Toisessa tasossa kerättävät tiedot vaativat ensimmäisen tason automaattisten työkalujen lisäksi manuaalista analyysiä. Tasolla saadaan hyvä ymmärrys yrityksen liiketoiminnasta esimerkiksi organisaatiokaavion avulla. Kolmannella tasolla tarvitaan kaikkien alempien tasojen tietojen lisäksi paljon manuaalista analyysiä ja saadaan selville hyvin syvä ymmärrys esimerkiksi liiketoiminnalle tärkeistä asiakassuhteista. Tiedon keruun tasojen saavuttamiseksi on siis tarkoitus saada tiedustelun avulla mahdollisimman paljon tietoa, jota voidaan hyödyntää hyökkäyksissä. Tarvittavia tietoja löytyy yleensä myös julkisista lähteistä, joihin yritykset ja työntekijät ovat antaneet tietojaan. Nämä tiedot eivät kuitenkaan välttämättä ole ajan tasalla, ja ne voivat olla puutteellisia tai jopa vääriä. Aiemmassa vaiheessa määritellyt rajoitukset, aika ja tavoitteet määrittävät, kuinka paljon tietoa voidaan kerätä. Tiedon keruu voidaan suorittaa passiivisesti kolmansien osapuolten kautta, semi-passiivisesti ottamalla yhteyttä yrityksen julkisesti saataviin palveluihin ja aktiivisesti, jolloin tarkoituksena on saada selville esimerkiksi yritysverkon rakenne sekä palvelimissa olevat avoimet palvelut, hakemistot ja tiedostot. Vasta aktiivisen tiedonkeruun pitäisi vaikuttaa epäilyttävältä. (Penetration Testing Execution Standard 2014c.)

### Threat Modeling

Tämä osio määrittelee, että uhkia mallinnettaessa täytyy säilyttää yhtenäinen tapa esittää uhat ja niiden kyky aiheuttaa haittaa sekä miten uhat vaikuttavat testattavaan yritykseen. Myös toistettavuus on tärkeää. Mallissa on neljä elementtiä: liiketoimintahyödykkeet, liiketoimintaprosessit, uhkien välittäjät/yhteisöt ja niiden kyvyt. Minimissään nämä kaikki pitäisi tunnistaa ja dokumentoida jokaisessa tunkeutumistestauksessa. Näiden lisäksi pitäisi ottaa huomioon "mitä jos" -tilanteet sen varalta, että hyödykkeitä menetettäisiin. Uhkien mallintaminen on kriittistä molemmille osapuolille, koska sen avulla yritys saa priorisoitua hyödykkeensä tärkeysjärjestykseen ja tunkeutumistestaajat pystyvät toimimaan mahdollisimman samankaltaisesti kuin hyökkääjä. Malli pitäisi luoda hyökkääjän näkökannalta, ja mallissa pitäisi hyödyntää tiedonkeruuvaiheessa saatuja tietoja. (Penetration Testing Execution Standard 2015b.)

Liiketoimintahyödykkeiden analyysissä saadaan selville, mitkä hyödykkeet ovat todennäköisimmin hyökkääjän kohteina ja mikä niiden arvo on yritykselle ja mikä vaikutus niiden menetyksellä olisi. Analyysin aikana saadaan myös organisatorista tietoa, kuten erilaisia käytäntöjä, suunnitelmia, tuotetietoja, markkinointitietoja, taloudellisia tietoja, työntekijöiden ja asiakkaiden tietoja ja teknisiä tietoja, joihin kuuluu esimerkiksi järjestelmien konfigurointitietoja ja käyttäjätunnuksiin liittyviä tietoja. Korotetuilla käyttäjätunnuksilla saadaan usein vaarannettua tietojärjestelmän turvallisuus. (Penetration Testing Execution Standard 2015b.)

Liiketoimintaprosessien analyysin avulla testaajat voivat saada selville, miten yritys saa rahaa, ja jos prosesseista löytyy virheitä, niin on mahdollista löytää keino, jolla yritys saadaan menettämään rahaa. On tarpeen erottaa kriittiset ja ei-kriittiset prosessit toisistaan, mutta on myös mahdollista, että useammat ei-kriittiset prosessit muodostavat yhdessä kriittisen virheen, jota voidaan myöhemmin hyödyntää tunkeutumistestauksessa. Analysoitaviin prosesseihin kuuluu teknisen infrastruktuurin, tiedon ja henkilöstön tukiprosesseja. Prosesseihin voi olla integroituna myös kolmas osapuoli. (Penetration Testing Execution Standard 2015b.)

Uhkien välittäjien/yhteisöjen analysoinnissa pyritään tunnistamaan sisäiset ja ulkoiset tekijät, joista voi koitua uhkaa yritykselle. Jollei tiettyä välittäjää pystytä tunnistamaan, niin yritetään löytää laajempi yhteisö, josta voisi aiheutua uhkia. Sisäisiä mahdollisesti uhkaa aiheuttavia tekijöitä ovat esimerkiksi työntekijät, johto, ylläpitäjät ja kehittäjät. Ulkoisia ovat taas esimerkiksi yrityskumppanit, kilpailijat, tavarantoimittajat ja rikolliset. (Penetration Testing Execution Standard 2015b.)

Kun uhkia välittävä yhteisö on tunnistettu, niin on aika selvittää sen kyvyt, joilla yrityksen turvallisuus pystytään vaarantamaan. Tämän selvittämiseksi täytyy analysoida, mitä työkaluja yhteisöllä on, miten he pääsevät hyödyntämään järjestelmissä olevia haavoittuvuuksia, heidän viestintämenetelmänsä ja miten he pääsevät hyödykkeisiin käsiksi. Hyökkääjien motivaatiot vaihtelevat jatkuvasti, joten motivaatioita pitäisi myös mallintaa. Mallia täydentää myös yrityksen vertaaminen vastaavan saman alan yrityksen kanssa. (Penetration Testing Execution Standard 2015b.)

### Vulnerability Analysis

Haavoittuvuuksia testattaessa etsitään virheitä järjestelmistä ja sovelluksista, joista hyökkääjä voi saada hyötyä. Virheet voivat olla esimerkiksi järjestelmän konfigurointivirheitä tai ohjelmiston suunnitteluvirheitä. Testauksen syvyyden ja laajuuden pitäisi vastata tavoitteisiin. On olemassa aktiivista ja passiivista testausta. Aktiivisessa testauksessa ollaan suoraan tekemisissä testattavan komponentin kanssa, ja aktiivinen testaus voidaan suorittaa joko automaattisesti tai manuaalisesti. Aktiivisessa testauksessa käytetään esimerkiksi verkko-, palvelu- ja websovellusskannereita. Passiivisessa testauksessa voidaan analysoida tiedostoja kuvaavia tietoja (tekijä, yritys jne.), eli metadataa tai monitoroida tietoliikennettä. Testien tulokset pitäisi validoida esimerkiksi kokeilemalla manuaalisesti samoja yhteyksiä, joita on skannattu automaattisten työkalujen avulla. Kun haavoittuvuus on löydetty, niin täytyy tutkia, kuinka tarkka arvio haavoittuvuudesta on ja miten haavoittuvuutta pystyisi hyödyntämään. Tähän on olemassa apuna haavoittuvuustietokantoja, esimerkiksi CVE (Common Vulnerabilities and Exposures), ja tietokantoja, jotka listaavat, miten tunnettuihin haavoittuvuuksiin pystyy hyökkäämään. Näitä tietokantoja kutsutaan Exploit Databaseiksi. Julkisesti on saatavilla myös laitteiden ja ohjelmistojen manuaaleja sekä oletustunnuksia ja -salasanoja, joita tunkeutumistestaajan kannattaa kokeilla. (Penetration Testing Execution Standard 2014d.)

### Exploitation

Tässä vaiheessa keskitytään pelkästään siihen, että päästään sisään järjestelmiin tai käsiksi resursseihin. Nyt yritetään tunnistaa pääkohde, jonka kautta päästään sisään yritykseen sekä tunnistetaan korkea-arvoisia hyödykkeitä. Edellisen vaiheen kunnollinen suorittaminen helpottaa tätä vaihetta, koska valmiina olevasta listasta voidaan valita kohde, johon todennäköisimmin päästään sisään, ja jolla on korkein vaikutus yritykseen. (Penetration Testing Execution Standard 2014e.)

Yrityksellä voi olla käytössä useita erilaisia keinoja, joilla hyökkäykset pyritään estämään. Tällaiset tilanteet pitäisi pystyä kiertämään, mutta jollei siinä onnistuta, niin on aika harkita vaihtoehtoisia hyökkäystapoja. Näistä vastakeinoista olisi hyvä ottaa selvää, jos mahdollista, ennen kuin hyökkäys suoritetaan. Vastakeinoja ovat esimerkiksi virustentorjuntaohjelmistot, tunkeutumisenestojärjestelmät ja palomuurit. Näitä voidaan yrittää välttää tiedon koodauksella, pakkaamisella ja salauksella. On myös mahdollista injektoida prosessi, jolloin haitallinen koodi saadaan piiloon luotettavan prosessin sisään. Hyökkäyksiä olisi parasta pystyä suorittamaan suoraan RAM-muistissa, koska levylle kirjoitettaessa tiedot tulevat ilmi, kun levyt skannataan. Tiettyihin tilanteisiin täytyy räätälöidä itse tarvittavat hyökkäykset. Viimeinen vaihtoehto on yrittää löytää kehittyneillä menetelmillä uusia haavoittuvuuksia, joita ei ole vielä missään haavoittuvuustietokannassa. Näihin haavoittuvuuksiin hyökkäämistä kutsutaan nollapäivähyökkäykseksi. Jos ohjelman lähdekoodiin pääsee käsiksi ja siitä löytyy virheitä, voi ohjelma olla altis nollapäivähyökkäyksille. Turvatoimia kiertämällä on myös mahdollista päästä laitteisiin fyysisesti käsiksi. Hyökkäysvaiheen suurin haaste on päästä vähimmällä vaivalla yrityksen sisään, pysyä havaitsemattomana ja vaikuttaa suurimmalla mahdollisimmalla tavalla yrityksen liikevaihtoon. Edellisten vaiheiden suorittaminen hyvin helpottaa tätä vaihetta. (Penetration Testing Execution Standard 2014e.)

### Post Exploitation

Kun laite on saatu haltuun, niin on aika määritellä laitteen arvo ja pitää laite tunkeutujan hallinnassa myöhempää käyttöä varten. Laitteen arvo määräytyy sen sisältävän arkaluontoisen tiedon lisäksi sen perusteella, kuinka hyödyllisesti laitteen kautta voidaan yhä edelleen vaarantaa yritysverkkoa. Tässä vaiheessa kuvataan tapoja, joilla voidaan tunnistaa arkaluontoinen tieto ja järjestelmän konfiguraatioasetukset, viestintäkanavat ja suhde muihin verkkolaitteisiin. Täytyy myös löytää vähintään yksi keino, jolla laitteeseen pääsee myöhemmin käsiksi. Tässä vaiheessa täytyy myös noudattaa tiettyjä sääntöjä, joilla suojellaan asiakasta (esimerkiksi kaikki järjestelmiin tehdyt muutokset dokumentoidaan ja pyritään palauttamaan alkuperäiseen tilaan) ja testaajaa (esimerkiksi yrityskäytäntöjen ja lakien noudattaminen). (Penetration Testing Execution Standard 2014f.)

Verkon määritysten analysoinnin avulla voidaan löytää lisää kohteita, joihin voi tunkeutua edellisten kautta. Kohteiden merkitys voi selvitä kohteeseen asennettujen ohjelmien ja palvelujen avulla. Arkaluontoista tietoa voidaan saada selville esimerkiksi näppäinpainalluksia tallentavien ohjelmien, näyttökuvien, tietoliikenteen monitoroinnin ja käyttäjän historiatietojen ja tiedostojen avulla. (Penetration Testing Execution Standard 2014f.)

### Reporting

Lopullisessa tunkeutumistestausraportissa on kaksi pääosiota, joissa kerrotaan eri kohderyhmille testin tavoitteet, menetelmät ja tulokset. Toinen osa on tarkoitettu johdolle ja toinen sisältää testiin liittyvät tekniset yksityiskohdat. Johdolle raportoitaessa kuvataan löydetyt asiat korkealla tasolla. Tämän osion olisi hyvä sisältää taustatiedot, testin yleistila, riskien arviointi, yleiset tulokset, yhteenveto suosituksista ja strateginen etenemissuunnitelma. Teknisen osion tulisi sisältää johdanto, osiot tiedon keruusta aktiivisesti ja passiivisesti sekä yritykseen ja henkilökuntaan liittyvät kerätyt tiedot. Lisäksi osioon pitäisi kuulua haavoittuvuusarviointi ja osio, jossa haavoittuvuuksien olemassaolo varmistetaan hyökkäämällä niihin. Lopuksi tekniseen osioon pitäisi sisällyttää hyökkäyksen jälkeen tehdyt toimenpiteet ja määritelmä riskeistä. Koko raportin lopuksi pitäisi antaa ohjeet turvallisuuden kehittämiseen ja hoitotoimenpiteisiin tulevaisuutta ajatellen.  (Penetration Testing Execution Standard 2014g.)

# Välineet ympäristön toteutukseen

Tässä luvussa verrataan ympäristön toteutukseen tarvittavia välineitä keskenään. Näistä välineistä otetaan yksi mukaan varsinaiseen toteutusvaiheeseen. Ympäristöstä tehdään virtuaalinen ja se toteutetaan vapailla ohjelmilla. Siksi luvun alussa käydään lyhyesti läpi, mitä vapaat ohjelmat ja virtualisointi tarkoittavat.

## Vapaat ohjelmat

Free Software Foundation määrittelee vapaat ohjelmistot käyttäjän vapautta kunnioittaviksi ohjelmistoiksi. Kyseiset ohjelmistot eivät välttämättä ole ilmaisia, vaan vapaan ohjelmiston käyttäjällä on vapaus käyttää, kopioida, jakaa, tutkia, muuttaa ja parantaa vapaita ohjelmistoja haluamallaan tavalla. Jotta kaikki tämä olisi mahdollista, vapaista ohjelmistoista on tarjottava sekä suoritettava binääritiedosto että lähdekooditiedostot. Jos ohjelmaa on muokattu, niin siitä pitää tarjota myös kyseiset tiedostot. Vapaista ohjelmistoja voi myös käyttää kaupalliseen toimintaan. (Free Software Foundation 2016a/1996.)

Vapaiden ohjelmistojen tekijät eivät saa poistaa oikeuksia ohjelmistojen käyttäjiltä missään vaiheessa, kunhan käyttäjät eivät tee mitään väärää. Vapaiden ohjelmistojen oikeuksien suojaamista varten on kehitetty Copyleft, mutta vapaita ohjelmistoja voi olla myös ilman Copyleftiä. (Free Software Foundation 2016a/1996.) Copyleft on tekijänoikeusmenetelmä, jolla esimerkiksi ohjelmistot ja niiden muokatut ja laajennetut versiot saadaan vapaiksi. Näin vapaan ohjelmiston parannellusta versiosta ei voi tehdä omisteista ohjelmistoa (proprietary software). Omisteisten ohjelmistojen kanssa Copyrightia käytetään rajoittamaan käyttäjän vapautta ohjelmistoihin. Sitä vastoin Copyleft takaa, että käyttäjien vapaus ohjelmistoihin säilyy ennallaan. Vaikutus on siis vastakkainen ja tästä nimitys left. Copyleft-töihin täytyy kuitenkin merkitä tekijänoikeus Copyright-sanan tai -symbolin avulla, jotta vapaiden ohjelmistojen käyttäjien alkuperäinen vapaus säilyisi. Jos vapaat ohjelmistot olisivat tekijänoikeudettomia (public domain), niin niistä voitaisiin myös tehdä omistusoikeudellisia ja näin käyttäjiltä olisi riistetty vapautta. (Free Software Foundation 2015/1996.)

Vapaita ohjelmistoja varten on olemassa useita eri lisenssejä. Näistä uusin Free Software Foundationin kehittämä lisenssi on GNU General Public License (GPL) version 3. Tämä on suositeltu lisenssi useimpiin vapaisiin ohjelmistoihin. GNU GPL:stä on muita versioita eri tarpeisiin, kuten GNU Lesser General Public License (LGPL) version 3, joka sallii vapaiden ohjelmistojen linkittämisen ei-vapaisiin ohjelmamoduuleihin sekä AGLPv3 (GNU Affero General Public License version 3), joka sopii verkossa toimiville vapaille ohjelmistoille, koska lisenssi sallii käyttäjän saada verkossa toimivan ohjelmiston lähdekoodin itselleen. GNU All-Permissive License on tarkoitettu pienille tiedostoille. Muita GNU GPL:n kanssa yhteensopivia vapaita lisenssejä ovat muun muassa patentteihin kantaa ottava Apache License, Version 2.0, alkuperäisestä muokattu BSD-lisenssi sekä nk. MIT-lisenssit (Expat License ja X11 License). Vapaata dokumentaatiota varten on olemassa esimerkiksi lisenssi GNU Free Documentation License, eli GNU FDL. (Free Software Foundation 2016b/2014.)

Avoimen lähdekoodin ohjelmistot (Open Source Software) ja vapaat ohjelmistot (Free Software) ovat määritelmiltään lähellä toisiaan, mutta ne välittävät eri merkityksen. Avointen ohjelmistojen määritelmä on vain hieman löysempi kuin vapaiden ohjelmistojen. Kuitenkin useimpien käyttäjien ilmeisin tulkinta avoimelle ohjelmistolle on, että avointa lähdekoodia pystyy katsomaan, vaikka tämä ei ole ainut avointen ohjelmistojen sallima asia. Vapaiden ohjelmistojen nimestä olisi suoraan tarkoitus käydä ilmi, että käyttäjällä on lisäksi vapaus tehdä ohjelmistolla, mitä haluaa. Englannin kielen sana free ei kuitenkaan ole yksikäsitteinen ja siksi ohjelmistoja on yritetty kuvata myös ranskan-/espanjankielisellä libre-sanalla, mutta sitä ei ymmärretä esimerkiksi Intiassa. (Stallman 2016/2007.)

## Virtualisointi

Virtualisointi tarkoittaa virtuaalisen version luomista jostain asiasta todellisen version sijaan. Virtualisoinnista on kyse esimerkiksi silloin, kun fyysinen kiintolevy jaetaan erillisiin loogisiin osioihin. (Rouse & Kirsch 2016/2006.) Virtuaalinen versio toteutetaan ohjelmallisesti eikä se siten ole fyysinen. Fyysisen kiintolevyn osiot kuitenkin näkyvät käyttöjärjestelmässä ikään kuin erillisinä kiintolevyinä.

Virtualisoinnin avulla tarvittavat resurssit abstrahoidaan virtualisoinnin alla olevalta todelliselta ohjelmistolta tai laitteistolta. Palvelinvirtualisoinnissa käytetään hypervisoriksi kutsuttua ohjelmistokerrosta emuloimaan laitteistoa. Kun virtualisoitu (vieras-)käyttöjärjestelmä kommunikoi tämän emuloidun laitteiston kanssa, niin se ei välttämättä tiedä ollenkaan, ettei kyseessä ole todellinen laitteisto. Virtualisoidun ympäristön suorituskyky ei ole täysin samaa luokkaa aidon laitteiston kanssa, mutta virtualisoitu ympäristö on joustava, koska se poistaa ohjelmistojen laitteistoriippuvuuden. (Rouse & Kirsch 2016/2006.) Kuvan 1 avulla Rouse ja Kirsch havainnollistavat, miten virtualisoitu arkkitehtuuri eroaa virtualisointikerroksen avulla perinteisestä arkkitehtuurista.

<figure>
  <img src="https://github.com/tonijaaskelainen/beginnerpentest/blob/master/materiaalit/kuvat/server_virtualization-traditional_virtual_architecture_desktop.jpg" alt="Perinteinen ja virtuaalinen arkkitehtuuri" width="600" height="348" />  
  <figcaption>Kuva 1. Perinteinen ja virtuaalinen arkkitehtuuri (Rouse & Kirsch 2016/2006)</figcaption>
</figure>  

Palvelinvirtualisointi on perinteisin tapa virtualisoida. Sen lisäksi virtualisointia käytetään nykyään tietoverkkojen, tallennustilan, datan, työasemien ja sovellusten yhteydessä. Palvelinvirtualisoinnin tarkoituksena on helpottaa resurssien käyttöä ja jakamista. Virtualisoinnin mahdollistavasta ohjelmistokerroksesta eli hypervisorista on olemassa kahta eri tyyppiä. Tyypin 1 hypervisor toimii suoraan laitteiston päällä ja tyypin 2 hypervisor tarvitsee toimiakseen käyttöjärjestelmän. Verkkovirtualisoinnissa kaista jaetaan itsenäisiin kanaviin ja näin saadaan muodostettua helpommin hallittavia osia verkosta. Tallennusvirtualisoinnissa useista verkkotallennuslaitteista muodostetaan ikään kuin yksi tallennusväline, jota hallitaan keskitetyn konsolin kautta. Datan virtualisoinnissa datan teknisiä tietoja, kuten sijainti ja tiedostomuoto, abstrahoidaan laajemman saavutettavuuden ja joustavuuden saavuttamiseksi. Työpöytävirtualisoinnissa palvelinkeskuksiin virtualisoidaan työasemia, joihin voi ottaa yhteyden ns. thin clientilla. Sovellusvirtualisoinnissa abstrahoidaan sovelluskerros erilleen käyttöjärjestelmästä. Näin sovellus voidaan suorittaa kapseloidussa muodossa, ja tällöin esimerkiksi Windows-ohjelman voi saada toimimaan Linuxilla. (Rouse & Kirsch 2016/2006.)

### VirtualBox

VirtualBox on Oraclen kehittämä virtualisointiin tarkoitettu tyypin 2 hypervisor, joka toimii Windows-, Mac-, Linux- ja Solaris-käyttöjärjestelmissä. VirtualBoxin avoin lähdekoodi on lisensoitu GNU General Public License versiolla 2. VirtualBox sopii kaikkialle: sulautetuista järjestelmistä työasemiin, palvelinkeskuksiin ja pilvipalveluihin. VirtualBoxiin voi luoda virtuaalikoneita yleisimpiä käyttöjärjestelmiä varten. Virtuaalikoneet sisältävät käyttöjärjestelmälle virtualisoidun laitteiston ominaisuudet, ja niihin voi asentaa Guest Additionseja suorituskyvyn nostoa ja lisäominaisuuksia varten. (Oracle Corporation 2016/2004.)

VirtualBoxin pääominaisuuksiin kuuluvat muun muassa siirrettävyys, Guest Additionsit, hyvä laitteistotuki, snapshotit, virtuaalikoneryhmät, puhdas modulaarinen arkkitehtuuri ja etäyhteys virtuaalikoneen näyttöön. VirtualBox ei myöskään vaadi, että fyysinen laitteisto tukisi virtualisointia, vaan useissa tapauksissa ohjelmistopohjainen virtualisointi riittää. (Oracle Corporation 2016/2004.)

Siirrettävyyden ansiosta VirtualBox ja sen virtuaalikoneet toimivat useissa eri käyttöjärjestelmissä. VirtualBox käyttää virtuaalikoneita varten OVF-tiedostomuotoa (Open Virtualization Format), ja se pystyy täten käyttämään myös muiden virtualisointisovellusten virtuaalikoneita, jotka ovat OVF-muodossa. VirtualBoxin virtuaalikoneita voi myös kloonata. Guest Additionsien avulla virtuaalikoneet tukevat automaattista resoluution asettamista, kiihdytettyjä 3D-grafiikoita ja saumattomia ikkunoita. Niiden avulla voi käyttää myös jaettuja kansioita isäntäkoneen ja virtuaalikoneen välillä. (Oracle Corporation 2016/2004.)

Snapshottien avulla voidaan tallentaa virtuaalikoneiden tila ja näin voidaan luoda erilaisia konfiguraatioita tai palata johonkin toiseen tilaan, josta snapshot oli otettu. Esimerkiksi jonkin häiriön takia voidaan palata helposti toimivaan snapshottiin. Snapshotit sisältävät virtuaalikoneiden asetusten tilan, virtuaalikiintolevyjen tilan ja myös virtuaalikoneiden muistin tilan, jos snapshot on otettu käynnissä olevasta virtuaalikoneesta. Näin voidaan palata ohjelman suorituksessa suoraan siihen kohtaan, josta snapshot oli otettu. (Oracle Corporation 2016/2004.)

VirtualBoxiin on myös olemassa laajennuspaketti, joka tuo lisää toimintoja. Lisäksi VirtualBoxia pystyy käyttämään ohjelmallisesti sitä varten kehitetyn Software Development Kitin avulla. VirtualBoxin hallintaa varten on graafisen käyttöliittymän lisäksi olemassa kevennetty graafinen versio, komentorivityökalu ja etäyhteyspalvelin, joka vaatii että palvelinta käyttävään virtuaalikoneeseen on asennettu ja otettu käyttöön Virtual Remote Desktop Extension -lisäosa. (Oracle Corporation 2016/2004.)

### Vagrant

Vagrant mahdollistaa helposti konfiguroitavien ja toistettavien sekä siirrettävien järjestelmien hallitsemisen yhtenäisellä tavalla. Koneet luodaan providerin avulla ja provisioner-työkalujen avulla koneisiin voidaan asentaa ohjelmistoja ja tehdä määrityksiä. (sethvargo 2016a.) Vagrant tukee oletuksena VirtualBoxia, Dockeria ja Hyper-V:tä providereina. Tuki muille providereille onnistuu pluginien avulla. (sethvargo 2016b.) Provisioner-työkaluihin kuuluvat shell-skriptit ja konfiguraationhallintajärjestelmät. Niiden avulla ohjelmien asentamisesta tulee automatisoitua ja toistettavissa olevaa. (sethvargo 2016c.) Vagrant on HashiCorpin kehittämä ja toimii Windows-, Mac- ja Linux-käyttöjärjestelmissä (HashiCorp).

Kehittäjille Vagrantin tarjoama hyöty on, että eri käyttöjärjestelmissä voidaan käyttää yhtenäiseksi konfiguroitua ympäristöä ja he voivat silti käyttää kehittämiseen haluamiaan editoreita ja työkaluja muokkaamalla valmista ympäristöä tarpeidensa mukaan. Ylläpitäjille Vagrant helpottaa hallintaskriptien testaamista paikallisesti ja mahdollistaa saman konfiguraation käytön ja työnkulun pilvipalveluissa. Suunnittelijat saavat Vagrantin avulla helposti käyttöönsä tarpeidensa mukaan toimivan ympäristön ja he voivat keskittyä ongelmien korjaamisen sijaan suunnitteluun. (sethvargo 2016a.) Vagrant-ympäristön voi myös jakaa esimerkiksi tiimin jäsenille. Jakaminen onnistuu HTTP:n ja SSH:n lisäksi suoraan Vagrant-ympäristössä auki olevaan porttiin. Jakaminen vaatii ngrok-ohjelmiston toimiakseen. (sethvargo, pearkes & chrisroberts 2017.) Vagrant on lisensoitu MIT-lisenssillä (mitchellh, fgrehm & aqnouch 2016/2010).

Vagrantfilessa kuvataan projektiin liittyvät tiedot, kuten koneiden tyypit, niiden määrittelyt ja provisionerit. Jokaiseen projektiin kuuluu vain yksi Vagrantfile ja se on tarkoitus kommitoida versionhallintajärjestelmään, jotta muut projektin kehittäjät pääsevät koodiin käsiksi ja voivat suorittaa koodin Vagrantilla. Vagrantfilet ovat siirrettäviä Vagrantin tukemien alustojen välillä. Vagrantfile kirjoitetaan Ruby-kielellä, mutta Rubyä ei välttämättä tarvitse osata Vagrantfilen konfiguroimista varten, koska tiedosto koostuu pääasiassa yksinkertaisista muuttujien arvojen asettamisesta. Vagrant etsii Vagrantfilea oletusarvoisesti ensin työhakemistosta ja sen jälkeen tämän ylähakemistoista. Jos Vagrantfileja on useita, niin niissä olevat määrittelyt yhdistetään tietyssä järjestyksessä. (sethvargo 2016d.) Yhteen Vagrantfileen voi määritellä useamman koneen. Näin voidaan mallintaa esimerkiksi palvelinympäristöä, jossa eri palvelut on eriytetty omiin koneisiinsa. (sethvargo & afeld 2017.)

Virtualisointiohjelmistot sisältävät usein komentorivityökaluja virtuaalikoneiden hallintaa varten. Vagrant käyttää näitä virtuaalikoneiden komentorivityökaluja sisäisesti ja pystyy ratkaisemaan automaattisesti yleisimmät virhetilanteet, joten ympäristöjen hallinta on helppoa. Erikoistapaukset saattavat kuitenkin vaatia custom-skriptien käyttöä. (sethvargo & mitchellh 2017.)

Vagrantin paketoituja koneita kutsutaan nimellä box. Boxeja saa hankittua julkisesta Vagrant-katalogista Vagrant Cloudista. Lisäksi Vagrant tukee avoimen lähdekoodin Bento-boxeja. Boxeja on tarjolla useille eri providereille ja boxit sisältävät useita eri käyttöjärjestelmiä. Boxeja on myös tehty erityistarkoituksiin, kuten LAMP-stackia varten. (sethvargo, vmelnik-ukraine & chrisroberts 2017.)

Vagrant tarjoaa korkean tason tietoverkkoasetuksia, jotka toimivat eri providerien välillä. Lisäksi on tarjolla erityisiä provider-kohtaisia tietoverkkoasetuksia. (sethvargo 2016e.)

# Välineet ympäristöön tunkeutumiseen

Tässä luvussa verrataan ympäristön tunkeutumiseen tarvittavia välineitä keskenään. Näistä välineistä otetaan yksi mukaan varsinaiseen toteutusvaiheeseen.

## Kali Linux

Kali Linux on Offensive Securityn kehittämä vapaa ja avoin tunkeutumistestaukseen keskittynyt Linux-jakelu. Se toimii 32- ja 64-bittisten laitteiden lisäksi ARM-laitteissa. (Kali Linux 2017.) Kali Linux perustuu Debian Linuxiin ja se on lisensoitu GNU GPL -lisenssillä, mutta Kalin non-free-osiossa on myös ei-vapaita ohjelmistoja (Offensive Security 2017a).

Kali on BackTrack Linuxista uudelleenkehitetty versio, joka sisältää useita satoja tunkeutumistestaukseen ja tietoturvaan liittyviä työkaluja. Kalin käyttäjän odotetaan osaavan käyttää Linuxia yleisesti, koska jakelu on tarkoitettu tunkeutumistestauksen ammattilaisille. (Offensive Security 2017b.) Täten Offesive Security (2017c) suositteleekin Linux-aloittelijoille Debian-, Ubuntu- tai Mint-jakeluita.

Kali Linuxissa on muutamia muutoksia tavallisiin Linux-jakeluihin verrattuna. Kali on tarkoitettu pääkäyttäjän eli rootin käytettäväksi, koska useat tunkeutumistestauksessa käytettävät työkalut vaativat joka tapauksessa root-oikeudet toimiakseen. Lisäksi Kali estää tietoverkkopalveluiden automaattisen käynnistymisen koneen käynnistyessä uudelleen. (Offensive Security 2017c.) On kuitenkin mahdollista tehdä listoja, joissa sallitaan poikkeukset tähän käytäntöön (Offensive Security 2017d). Kali sisältää myös custom-ytimen ja minimaalisen määrän luotettuja pakettivarastoja (Offensive Security 2017c).

Kun Kalia käyttää Livenä (suoritetaan joltain tietovälineeltä ilman asennusta), niin voi valita Forensics Moden. Tämä tila ei jätä koneen kiintolevylle mitään jälkiä eikä toimenpiteitä tapahdu automaattisesti ilman käyttäjän toimia (Offensive Security 2017e).

Kalin työkaluja on jaettu metapaketteihin, joten tarvittaessa vain tiettyyn tehtävään soveltuvat työkalut voi asentaa metapaketin avulla. Esimerkiksi kali-linux-top10-metapaketista löytyy suositut aircrack-ng, burpsuite, hydra, john, maltego, metasploit-framework, nmap, sqlmap, wireshark ja zaproxy. (Offensive Security 2017f.)

Offensive Security (2017g) ryhmittelee työkalut käyttötarkoituksen mukaan seuraaviin ryhmiin:

- Exploitation Tools (haavoittuvuuksiin hyökkäävät työkalut).
- Forensics Tools (rikostekniset työkalut).
- Hardware Hacking (laitteiston hakkerointi).
- Information Gathering (tiedon kerääminen).
- Maintaining Access (sisäänpääsyn ylläpito).
- Password Attacks (salasanahyökkäykset).
- Reporting Tools (raportointityökalut).
- Reverse Engineering (takaisinmallinnus).
- Sniffing & Spoofing (tietoliikennepakettien kaappaaminen ja muokattujen pakettien lähettäminen).
- Stress Testing (kuormitustestaus).
- Vulnerability Analysis (haavoittuvuuksien analysointi).
- Web Applications (web-sovellukset).
- Wireless Attacks (langattomat hyökkäykset).

Työkaluilla voi olla useampi käyttötarkoitus. Kalin käytäntöihin ei kuulu yleisesti laittomiin tarkoituksiin (esim. DoS) käytettyjen työkalujen tarjoaminen oletuksena. (Offensive Security 2017h.)

### Metasploit Framework

Metasploit Framework on Rapid7:n kehittämä Ruby-ohjelmointikieleen perustuva modulaarinen tunkeutumistestausalusta, joka sisältää työkaluja tietoturvahaavoittuvuuksien testaamista, tietoverkkojen listausta, hyökkäysten suorittamista ja havaituksi tulemisen välttämistä varten (Rapid7 a). Metasploitista on tarjolla viisi eri versiota. Avoimen lähdekoodin Metasploit Framework muodostaa pohjan Metasploitin muille kaupallisille versioille. (Rapid7 b.) Nämä ovat ominaisuuksien mukaan kasvavassa järjestyksessä listattuna Metaploit Community, Metasploit Express, Metasploit Ultimate ja Metasploit Pro (Rapid7 c). Metasploitin käyttöä varten on olemassa eettisen hakkeroinnin opas nimeltään Metasploit Unleashed (Offensive Security 2017i). Metasploit Framework on lisensoitu BSD-3-clause-lisenssillä (bcook-r7 2017/2006), ja se toimii Windows-, Mac- ja Linux-käyttöjärjestelmissä (Cook 2017).

Metasploit Frameworkia käytetään yleisimmin MSFconsolen kautta (Rapid7 a). Muilla kaupallisilla versioilla Metasploitia pystyy käyttämään myös web-käyttöliittymän kautta (Rapid7 c).

Metasploit Frameworkin tärkeänä ydinkomponenttina ovat erilaiset moduulit. Moduulit ovat ohjelmistokomponentteja, jotka määrittävät Metasploitilla tehtävät toimenpiteet eli taskit. Metasploit Frameworkin moduulien tyypit ovat Auxiliary, Exploit, Payload, Post-Exploitation ja NOP generator. Auxiliary-moduulit eivät suorita hyökkäyskoodia, vaan ovat esimerkiksi haavoittuvuuksien skannereita. Exploit-moduulit suorittavat tiettyyn haavoittuvuuteen kohdennettuja komentoja. Payload-moduulit suorittavat haitallista koodia sen jälkeen, kun Exploit-moduulien avulla on päästy tunkeutumaan järjestelmään. Payload voi olla komentoikkuna tai Meterpreter. Meterpreter on kehittynyt payload, jolla voi luoda dynaamisesti uusia ominaisuuksia tarpeen mukaan. Post-Exploitation-moduuleilla kerätään lisää tietoa järjestelmästä. Niillä voidaan esimerkiksi listata kohteessa olevia palveluita ja ohjelmistoja. NOP generator -moduulit tuottavat satunnaisia tavuja, joita IDS- ja IPS-järjestelmät eivät normaalisti tunnista. (Rapid7 a.) NOP on lyhenne sanasta no operation payload (Rapid7 b). Satunnaiset tavut eivät siis ole suoritettavaa koodia.

Toinen Metasploitin ydinkomponenteista on datastore. Kyseessä on taulu, johon nimetty arvoja, joilla voidaan määritellä, miten Metaploitin eri komponentit toimivat. Datastoreja on sekä globaaleja että moduulikohtaisia. (Rapid7 a.)

Metasploitissa voi koota kohteet ja tiedot omiksi kokonaisuuksiksi Workspaceihin. Esimerkiksi yrityksen aliverkot ja osastot voidaan jakaa omiin Workspaceihin. Workspaceihin voidaan tuoda, muokata ja niistä voidaan viedä dataa. Nykyisen kohteen tila raportoidaan Workspacesta automaattisesti. (Rapid7 d.) Myös tagien antaminen kohdekoneille on mahdollista (Rapid7 e).

Metasploit Frameworkissa on tuki PostgreSQL-tietokannalle. Tietokannan käyttö Metasploit Frameworkissa ei ole välttämätöntä, mutta tietokantaan saa talteen kohdekoneiden tiedot, hyökkäysten tulokset ja kaapatut tiedot. (Rapid7 f.) Metasploitia voi myös käyttää etänä ja sen voi asettaa toimimaan palveluna (Rapid7 g).

Muita Metasploitin käyttöön liittyviä käsitteitä ovat Bind Shell Payload, Discovery Scan, Exploit, Listener, Payload, Project, Reverse Shell Payload, Shellcode, Shell ja Vulnerability. Project tarkoittaa Metasploit Pro -versiossa samaa kuin Workspace Metasploit Frameworkissa. Discovery Scanin avulla etsitään kohdekoneet tietoverkosta. Shell tarkoittaa komentoikkunaa. Vulnerability on haavoittuvuus eli tietoturvaheikkous tai -vika. Exploit on ohjelma, joka antaa hyökkääjälle pääsyn kohdekoneelle hyödyntämällä siinä olevaa haavoittuvuutta. Payload on tunkeutumisen jälkeen kohdekoneella suoritettava koodi. Shellcode on kokoelma käskyjä, joita käytetään exploitin payloadina. Listener odottaa tulevaa yhteyttä hyökkäävällä tai kohteena olevalla koneella ja hallitsee yhteydenpidon koneiden välillä. Bind Shell Payload ottaa hyökkääjän koneelta yhteyttä kohdekoneen Listeneriin ja antaa hyökkääjälle komentoikkunan käyttöön. Reverse Shell Payload ottaa kohdekoneelta yhteyttä hyökkääjän koneella olevaan Listeneriin ja antaa hyökkääjälle komentoikkunan käyttöön. (Rapid7 h.)

### Burp Suite

Burp Suite on web-sovelluksien turvallisuuden testaamiseen erikoistunut ohjelmisto (PortSwigger 2017a), johon on integroitu useita työkaluja (PortSwigger 2017b). Burp Suite on suljetun lähdekoodin ohjelmisto (PortSwigger 2017c), ja siitä on olemassa sekä ilmainen että maksullinen Professional-versio (PortSwigger 2017d). Burp Suite on PortSwiggerin kehittämä ja toimii Windows-, Mac- ja Linux-käyttöjärjestelmissä (PortSwigger 2017e). Lisäksi Burp Suite vaatii toimiakseen 64-bittisen Java Runtime Environmentin version 1.7 tai uudemman (PortSwigger 2017c).

Burpin työkaluja ovat Target, Proxy, Spider, Scanner, Intruder, Repeater, Sequencer, Decoder, Comparer ja Extender. Näiden työkalujen välillä voi lähettää pyyntöjä, eli ne toimivat tehokkaasti yhdessä. Target-työkalu mahdollistaa haavoittuvuuksien testaamisen ja antaa tietoa kohdesovelluksista. Proxy-työkalu toimii välimiehenä sovelluksen ja selaimen välillä ja sen avulla on mahdollista tarkastella ja muokata sekä tulevaa että lähtevää liikennettä. Spider-työkalu etsii web-sovelluksesta sisältöä ja toiminnallisuutta. Scanner-työkalu kuuluu vain Pro-versioon, ja se pystyy löytämään automaattisesti useita erityyppisiä haavoittuvuuksia. (PortSwigger 2017f.) Intruder-työkalun avulla voi suorittaa automatisoituja kustomoituja hyökkäyksiä web-sovelluksiin (PortSwigger 2017d). Repeater-työkalun avulla voidaan manipuloida yksittäisiä HTTP-pyyntöjä ja analysoida, miten web-sovellus vastaa niihin. Sequencer-työkalu pystyy arvioimaan, kuinka satunnaisia ei-ennustettaviksi tarkoitetut selaintiedot ovat. Decoder-työkalu pystyy koodaamaan tietoa toiseen muotoon (encode) ja purkamaan koodatun tiedon alkuperäiseksi (decode). Comparer-työkalu tekee visuaalisen vertailun minkä tahansa kahden tiedon välillä. Extender-työkalu mahdollistaa laajennusten käytön Burpissa oman tai kolmannen osapuolen kirjoittaman koodin avulla. (PortSwigger 2017f.)

# Tunkeutumiskohteet

Tässä luvussa verrataan tunkeutumiskohteiksi sopivia järjestelmiä keskenään. Näistä kohteista otetaan yksi mukaan varsinaiseen toteutusvaiheeseen.

## Metasploitable

Metasploitable 2 on tarkoituksella haavoittuvaksi tehty Ubuntu Linux -virtuaalikone. Metasploitablen avulla voidaan havainnollistaa yleisiä haavoittuvuuksia ja testata tietoturvatyökaluja. Metasploitable 2:een tunkeutumista varten on olemassa Rapid7:n kirjoittama ohje nimeltään Metasploitable 2 Exploitability Guide. Oppaassa on listattu useita turvallisuusvirheitä, joita Metasploitable 2 sisältää. (Rapid7 i.) Metasploitable versio 2 on ladattavissa SourceForgesta (rapid7user).

Metasploitablesta on myös julkaistu versio 3. Metasploitable 3 on avoimen lähdekoodin projekti, toisin kuin Metasploitable 2. Metasploitable 3 kasataan käyttämällä Packeria, Vagrantia, Vagrant Reload Pluginia ja VirtualBoxia. Kasaamiseen on tarjolla automaattiset skriptit: Windowsille PowerShell-muodossa ja Linuxille sh-muodossa. Sen sijaan Metasploitable 2 on valmis virtuaalikone. (Chen 2016.) Build-skripteistä käy ilmi, että Metasploitable 3 on Windows 2008 -palvelin. Metasploitable 3:sta on julkaistu myös Ubuntu Linux 14.04 -versio Vagrant Cloudiin (Sliim 2017).

Metasploitable 3 on tarkoitettu eritasoisille käyttäjille. Jokaiseen haavoittuvuuteen ei pysty tunketumaan Metasploitin avulla. Sen sijaan Metasploitable 2 on suunniteltu nimenomaan Metasploitia varten. Ympäristömuuttujan MS3_DIFFICULTY avulla voidaan säätää Metasploitable 3:n vaikeustasoa. Aidon yritystiedon sijaan Metasploitable 3 sisältää kuvia, joita on tarkoitus kerätä lipunryöstön tapaan. Kuvien dataa on voitu tarkoituksenmukaisesti monimutkaistaa, niihin on voitu asettaa tiukat käyttöoikeudet tai tiedoston ominaisuudet. Kuvat voivat myös olla sulautettuja. Kuvien löytäminen saattaa siis vaatia takaisinmallinnustaitoja. Lippujen ryöstössä harjoitellaan tunketumisen jälkeistä eli Post-Exploitation -vaihetta. Normaalisti tunkeutumistestauksessa hyödynnetään yhdeltä koneelta löytyneitä tietoja seuraavaan koneeseen tunkeutumista varten, joten Rapid7 aikoo tulevaisuudessa rakentaa kokonaisen verkon haavoittuvia koneita. (Chen 2016.)

## Muut peruspalvelimet

Tässä luvussa kuvataan lyhyesti muita yleisesti käytössä olevia palvelimia. Yritysympäristössä tämä tarkoittaa Windows- ja Linux-palvelimia (Barker 2014).

### Windows-palvelin

Barkerin (2014) mukaan Microsoftin kehittämillä Windows-käyttöjärjestelmillä ja -ohjelmistoilla oli vuonna 2014 75 %:n markkinaosuus ja täten ne on koettu standardivaihtoehdoksi yritysympäristössä. Windows-palvelinten vanhempien versioiden käyttäminen on tietoturvariski, koska elinkaaren lopun saavuttaneisiin palvelimiin ei enää tule päivityksiä. Windowsin lisenssit ovat myös kalliita. (Barker 2014.) Windows-palvelimista on saatavilla versioita kokeilukäyttöön tietyksi ajaksi Microsoft Evaluation Centeristä. Uusin versio on Windows Server 2016. (Microsoft 2017.) Windows koetaan käyttäjäystävällisemmäksi kuin Linux, koska Microsoft on tuottanut ohjelmistoja melkein 30 vuotta ja käyttäjät ovat omaksuneet tietyt asiat (Walker & Shepherd 2017a). Useimmat ohjelmat ovat yhteensopivia Windowsin kanssa (Walker & Shepherd 2017b), ja valitettavasti tämä pätee myös haittaohjelmiin (Walker & Shepherd 2017c).

### Linux-palvelin

Yli 95 % supertietokoneista käyttää Linuxia, joten se on nopein ja vähiten resursseja käyttävä käyttöjärjestelmä. Linux-jakelut tarjoavat Microsoftin ohjelmia vastaavia vapaita ohjelmia, mutta Windows on tunnetumpi ja täten ylläpitäjien löytäminen Linux-palvelimille olla vaikeampaa ja kalliimpaa. (Barker 2014.) Linux koetaan turvallisemmaksi kuin Windows, koska Linuxissa käyttöoikeuksia rajoitetaan hyvin ja virheitä on mahdollista löytää avoimen lähdekoodin ansiosta (Walker & Shepherd 2017c).

Stroudin (2017) mukaan Canonicalin kehittämä Ubuntu Server voittaa vertailussa kaikki muut Linux-palvelinjakelut. Ubuntun uusin pitkään tuettu versio on 16.04 LTS (Long Term Support). LTS-versiot julkaistaan joka toinen vuosi ja niille tarjotaan tukea viideksi vuodeksi. (Stroud 2017.) Palvelimissa on tavallista käyttää pitkään tuettuja versioita. Ubuntu Server on vapaasti ladattavissa ja siitä on myös olemassa yhdeksän kuukauden ajan tuettuja versioita, joista uusin on 17.10 (Canonical 2017).

# Penetration Testing -harjoitusympäristön toteutus

Tässä luvussa kuvataan Penetration Testing -harjoitusympäristön toteuttaminen. Ympäristö on virtuaalinen, toimii vapaiden ohjelmien avulla ja se on lisensoitu GPLv2-lisenssillä, joka on luettavissa GitHubista osoitteesta https://github.com/tonijaaskelainen/beginnerpentest/blob/master/LICENSE. Ensin ympäristö pystytetään ja sen jälkeen testataan ympäristöön tunkeutumista. Ympäristö pystytetään Vagrantin avulla ja Vagrantin provideriksi otetaan käyttöön VirtualBox. Hyökkäävä kone suorittaa Kali Linuxia ja tunkeutumistyökaluna toimii Metasploit Framework. Tunkeutumiskohteena toimii Metasploitable (2 tai 3).

Projektin lisenssiksi valittiin GPLv2, koska työn tekijä halusi mahdollistaa työn jakamisen vapaasti muille käyttäjille ja kehittäjille. Ympäristöstä tehtiin virtuaalinen, koska haluttiin, että ympäristö ei ole sidonnainen yhteen laitteeseen, vaan että tunkeutumistestausta voisi harjoitella mahdollisimman monella koneella. Vagrant valittiin ympäristön perustaksi, koska se on vapaasti saatavilla, se toimii useilla eri alustoilla ja Vagrantfilet mahdollistavat koneiden määrittelyjen jakamisen kätevästi. VirtualBox valittiin Vagrantin provideriksi, koska Vagrantin käyttö vaatii jonkin providerin, VirtualBox on vapaasti saatavilla, toimii useilla eri alustoilla ja koska Vagrant tukee VirtualBoxia ilman plugineja. Kali Linux valittiin hyökkäyskoneeksi, koska se on suunniteltu tunkeutumistestausta varten ja täten siinä on paljon tarpeellisia työkaluja, mukaan lukien Metasploit Framework ja Burp Suite. Metasploit Framework valittiin tunkeutumistyökaluksi, koska se on monipuolinen tunkeutumistestaukseen suunniteltu vapaa ohjelmisto. Kohteeksi valittiin Metasploitable (2 tai 3), koska se on suunniteltu haavoittuvaksi ja on täten ideaalinen tunkeutumistestauksen harjoittelua varten.

## Virtuaaliympäristön pystytys



## Tunkeutumisen testaaminen



# Pohdinta



# Lähteet

Barker, D. 2014. Windows vs Linux: Which OS is best for your business? Luettavissa: http://www.techradar.com/news/software/operating-systems/windows-vs-linux-which-os-is-best-for-your-business-1265775. Luettu: 24.10.2017.

bcook-r7 2017/2006. LICENSE. Luettavissa: https://github.com/rapid7/metasploit-framework/blob/master/LICENSE. Luettu: 23.10.2017.

Canonical Ltd. 2017. Download Ubuntu Server. Luettavissa: https://www.ubuntu.com/download/server. Luettu: 25.10.2017.

Chen, W. 2016. Metasploitable3: An Intentionally Vulnerable Machine for Exploit Testing. Luettavissa: https://blog.rapid7.com/2016/11/15/test-your-might-with-the-shiny-new-metasploitable3/. Luettu: 25.10.2017.

Cook, B. 2017. Nightly Installers. Luettavissa: https://github.com/rapid7/metasploit-framework/wiki/Nightly-Installers. Luettu: 24.10.2017.

Core Security 2015. Penetration Testing Overview. Luettavissa: http://www.coresecurity.com/penetration-testing-overview. Luettu: 5.12.2015.
(Huomautus opponoijaa varten: Tarkistettu 13.9.2016, että tieto löytyy Internet Archive Wayback Machinesta http://web.archive.org/web/20160104132108/http://www.coresecurity.com/penetration-testing-overview)

Free Software Foundation, Inc. 2015/1996. What is Copyleft? Luettavissa: https://www.gnu.org/copyleft/copyleft.html. Luettu: 4.10.2016.

Free Software Foundation, Inc. 2016a/1996. What is free software? Luettavissa: https://www.gnu.org/philosophy/free-sw.html. Luettu: 4.10.2016.

Free Software Foundation, Inc. 2016b/2014. Various Licenses and Comments about Them. Luettavissa: https://www.gnu.org/licenses/license-list.html. Luettu: 5.10.2016.

HashiCorp. Development Environments Made Easy. Luettavissa: https://www.vagrantup.com/. Luettu: 24.10.2017.

Kali Linux 2017. Our Most Advanced Penetration Testing Distribution, Ever. Luettavissa: https://www.kali.org/. Luettu: 16.10.2017.

Microsoft 2017. Windows Server Evaluations. Luettavissa: https://www.microsoft.com/en-us/evalcenter/evaluate-windows-server. Luettu: 25.10.2017.

mitchellh, fgrehm & aqnouch 2016/2010. The MIT License. Luettavissa: https://github.com/mitchellh/vagrant/blob/master/LICENSE. Luettu: 21.11.2016.

Offensive Security 2017a. Kali Linux Open Source Policy. Luettavissa: https://docs.kali.org/policy/kali-linux-open-source-policy. Luettu: 18.10.2017.

Offensive Security 2017b. What is Kali Linux ? Luettavissa: https://docs.kali.org/introduction/what-is-kali-linux. Luettu: 18.10.2017.

Offensive Security 2017c. Should I Use Kali Linux? Luettavissa: https://docs.kali.org/introduction/should-i-use-kali-linux. Luettu: 18.10.2017.

Offensive Security 2017d. Kali Network Service Policies. Luettavissa: https://docs.kali.org/policy/kali-linux-network-service-policies. Luettu: 18.10.2017.

Offensive Security 2017e. Kali Linux Forensics Mode. Luettavissa: https://docs.kali.org/general-use/kali-linux-forensics-mode. Luettu: 18.10.2017.

Offensive Security 2017f. Kali Linux Metapackages. Luettavissa: https://tools.kali.org/kali-metapackages. Luettu: 18.10.2017.

Offensive Security 2017g. Kali Linux Tools Listing. Luettavissa: https://tools.kali.org/tools-listing. Luettu: 18.10.2017.

Offensive Security 2017h. Kali Linux Tools Policy. Luettavissa: https://docs.kali.org/policy/penetration-testing-tools-policy. Luettu: 18.10.2017.

Offensive Security 2017i. Metasploit Unleashed. Luettavissa: https://www.offensive-security.com/metasploit-unleashed/. Luettu: 19.10.2017.

Oracle Corporation 2016/2004. Chapter 1. First steps. Luettavissa: https://www.virtualbox.org/manual/ch01.html. Luettu: 9.11.2016.

Penetration Testing Execution Standard, The 2014a. Main Page. Luettavissa: http://www.pentest-standard.org/index.php/Main_Page. Luettu: 5.12.2015.

Penetration Testing Execution Standard, The 2014b. Pre-engagement. Luettavissa: http://www.pentest-standard.org/index.php/Pre-engagement. Luettu: 14.9.2016.

Penetration Testing Execution Standard, The 2014c. Intelligence Gathering. Luettavissa: http://www.pentest-standard.org/index.php/Intelligence_Gathering. Luettu: 16.9.2016.

Penetration Testing Execution Standard, The 2014d. Vulnerability Analysis. Luettavissa: http://www.pentest-standard.org/index.php/Vulnerability_Analysis. Luettu: 19.9.2016.

Penetration Testing Execution Standard, The 2014e. Exploitation. Luettavissa: http://www.pentest-standard.org/index.php/Exploitation. Luettu: 20.9.2016.

Penetration Testing Execution Standard, The 2014f. Post Exploitation. Luettavissa: http://www.pentest-standard.org/index.php/Post_Exploitation. Luettu: 20.9.2016.

Penetration Testing Execution Standard, The 2014g. Reporting. Luettavissa: http://www.pentest-standard.org/index.php/Reporting. Luettu: 20.9.2016.

Penetration Testing Execution Standard, The 2015a. FAQ. Luettavissa: http://www.pentest-standard.org/index.php/FAQ. Luettu 13.9.2016.

Penetration Testing Execution Standard, The 2015b. Threat Modeling. Luettavissa: http://www.pentest-standard.org/index.php/Threat_Modeling. Luettu: 16.9.2016.

PortSwigger Ltd. 2017a. How to Use Burp Suite. Luettavissa: https://support.portswigger.net/customer/portal/articles/1783101-Using%20Burp_Using%20Burp%20Suite.html. Luettu: 23.10.2017.

PortSwigger Ltd. 2017b. Burp Suite Tools. Luettavissa: https://support.portswigger.net/customer/portal/articles/1783109-Using%20Burp_Burp%20Tools.html. Luettu: 23.10.2017.

PortSwigger Ltd. 2017c. Burp Suite Software. Luettavissa: https://support.portswigger.net/customer/portal/articles/1855756-burp-suite-software. Luettu: 23.10.2017.

PortSwigger Ltd. 2017d. Burp Suite Editions. Luettavissa: https://portswigger.net/burp. Luettu: 24.10.2017.

PortSwigger Ltd. 2017e. Download Burp Suite Free Edition. Luettavissa: https://portswigger.net/burp/freedownload. Luettu: 24.10.2017.

PortSwigger Ltd. 2017f. Burp Tools. Luettavissa: https://portswigger.net/burp/help/suite_burptools.html. Luettu: 24.10.2017.

Rapid7 a. Metasploit Framework. Luettavissa: https://metasploit.help.rapid7.com/docs/msf-overview. Luettu: 21.10.2017.

Rapid7 b. Getting Started. Luettavissa: https://metasploit.help.rapid7.com/docs/getting-started. Luettu: 20.10.2017.

Rapid7 c. Comparing Product Editions. Luettavissa: https://metasploit.help.rapid7.com/docs/comparing-product-editions. Luettu: 20.10.2017.

Rapid7 d. Managing Workspaces. Luettavissa: https://metasploit.help.rapid7.com/docs/managing-workspaces. Luettu: 22.10.2017.

Rapid7 e. Tagging hosts in msfconsole. Luettavissa: https://metasploit.help.rapid7.com/docs/tagging-hosts-in-msfconsole. Luettu: 22.10.2017.

Rapid7 f. Managing the Database. Luettavissa: https://metasploit.help.rapid7.com/docs/managing-the-database. Luettu: 22.10.2017.

Rapid7 g. Running Metasploit Remotely. Luettavissa: https://metasploit.help.rapid7.com/docs/running-metasploit-remotely. Luettu: 22.10.2017.

Rapid7 h. Metasploit Basics. Luettavissa: https://metasploit.help.rapid7.com/docs/metasploit-basics. Luettu: 20.10.2017.

Rapid7 i. Metasploitable 2 Exploitability Guide. Luettavissa: https://metasploit.help.rapid7.com/v1.1/docs/metasploitable-2-exploitability-guide. Luettu: 25.10.2017.

rapid7user 2012. Metasploitable. Luettavissa: https://sourceforge.net/projects/metasploitable/files/Metasploitable2/. Luettu: 25.10.2017.

Rouse, M. & Kirsch, B. 2016/2006. What is virtualization? Luettavissa: http://searchservervirtualization.techtarget.com/definition/virtualization. Luettu: 27.10.2016.

sethvargo 2016a. Why Vagrant? Luettavissa: https://github.com/mitchellh/vagrant/blob/master/website/source/docs/why-vagrant/index.html.md. Luettu: 22.11.2016.

sethvargo 2016b. Providers. Luettavissa: https://github.com/hashicorp/vagrant/blob/master/website/source/docs/providers/index.html.md. Luettu: 15.10.2017.

sethvargo 2016c. Provisioning. Luettavissa: https://github.com/hashicorp/vagrant/blob/master/website/source/docs/provisioning/index.html.md. Luettu: 15.10.2017.

sethvargo 2016d. Vagrantfile. Luettavissa: https://github.com/hashicorp/vagrant/blob/master/website/source/docs/vagrantfile/index.html.md. Luettu: 2.10.2017.

sethvargo 2016e. Networking. Luettavissa: https://github.com/hashicorp/vagrant/blob/master/website/source/docs/networking/index.html.md. Luettu: 15.10.2017.

sethvargo & afeld 2017. Multi-Machine. Luettavissa: https://github.com/hashicorp/vagrant/blob/master/website/source/docs/multi-machine/index.html.md. Luettu: 15.10.2017.

sethvargo & mitchellh 2017. Vagrant vs. CLI Tools. Luettavissa: https://github.com/hashicorp/vagrant/blob/master/website/source/intro/vs/cli-tools.md. Luettu: 2.10.2017.

sethvargo, pearkes & chrisroberts 2017. Vagrant Share. Luettavissa: https://github.com/hashicorp/vagrant/blob/master/website/source/docs/share/index.html.md. Luettu: 13.10.2017.

sethvargo, vmelnik-ukraine & chrisroberts 2017. Boxes. Luettavissa: https://github.com/hashicorp/vagrant/blob/master/website/source/docs/boxes.html.md. Luettu: 13.10.2017.

Sliim 2017. Sliim/metasploitable3-trusty Vagrant box. Luettavissa: https://app.vagrantup.com/Sliim/boxes/metasploitable3-trusty. Luettu: 25.10.2017.

Stallman, R. 2016/2007. Why Open Source misses the point of Free Software. Luettavissa: https://www.gnu.org/philosophy/open-source-misses-the-point.html. Luettu: 5.10.2016.

Stroud, F. 2017. Top 10 Linux Server Distributions of 2017. Luettavissa: https://www.serverwatch.com/columns/slideshows/top-10-linux-server-distributions.html. Luettu: 25.10.2017.

Walker, D. & Shepherd, A. 2017a. Windows vs Linux: what's the best operating system? Luettavissa: http://www.itpro.co.uk/operating-systems/24841/windows-vs-linux-whats-the-best-operating-system-4/page/0/2. Luettu: 25.10.2017.

Walker, D. & Shepherd, A. 2017b. Windows vs Linux: what's the best operating system? Luettavissa: http://www.itpro.co.uk/operating-systems/24841/windows-vs-linux-whats-the-best-operating-system-4. Luettu: 25.10.2017.

Walker, D. & Shepherd, A. 2017c. Windows vs Linux: what's the best operating system? Luettavissa: http://www.itpro.co.uk/operating-systems/24841/windows-vs-linux-whats-the-best-operating-system-4/page/0/1. Luettu: 25.10.2017.

# Liitteet




